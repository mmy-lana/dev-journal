# 🗓️ Work Log — 2025-03-06

## ✅ Summary
Fixed a validation issue where the pembeli tab under dokumen 30 did not validate the kodeNegara field, causing the field to be ignored even when left empty.

## 🧠 Problem
In dokumen 30 (ekspor), tab pembeli was not validating required fields. The field kodeNegara was commented out in the field schema, allowing empty submissions to pass validation.

## 🔍 Investigation
Logged data in check2() revealed that for dokumen = 30 and tab = pembeli, the validator returned no errors even when fields were missing.

## 💡 Solution
Re-enabled field validation and added defensive check:

data.js
```diff
// Before
// kodeNegara: e => (e.kodeNegara),

// After
kodeNegara: e => (e.kodeNegara),
```

index.js
```ts
if (kodeDokumen === '30' && tab === 'pembeli') {
  const isValidData = data?.alamatEntitas?.trim() && data?.namaEntitas?.trim() && data?.kodeNegara?.trim();
  return !isValidData;
}
```

## 🧪 Result
- ✅ Validation returns error when required fields are missing
- ✅ Confirmed working in form UI
- ✅ Logs validated fix

## 📁 Files Affected
- src/utils/validator/data.js
- src/utils/validator/index.js

## 🔧 Stack
Microfrontend, React, Schema Validator

## 🧠 Reflection
Commented schema properties can silently break validation. Propose adding required field tests per tab+document.
