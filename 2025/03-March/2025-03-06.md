# ğŸ—“ï¸ Work Log â€” 2025-03-06

## âœ… Summary
Fixed a validation issue where the pembeli tab under dokumen 30 did not validate the kodeNegara field, causing the field to be ignored even when left empty.

## ğŸ§  Problem
In dokumen 30 (ekspor), tab pembeli was not validating required fields. The field kodeNegara was commented out in the field schema, allowing empty submissions to pass validation.

## ğŸ” Investigation
Logged data in check2() revealed that for dokumen = 30 and tab = pembeli, the validator returned no errors even when fields were missing.

## ğŸ’¡ Solution
Re-enabled field validation and added defensive check:

data.js
```diff
// Before
// kodeNegara: e => (e.kodeNegara),

// After
kodeNegara: e => (e.kodeNegara),
```

index.js
```ts
if (kodeDokumen === '30' && tab === 'pembeli') {
  const isValidData = data?.alamatEntitas?.trim() && data?.namaEntitas?.trim() && data?.kodeNegara?.trim();
  return !isValidData;
}
```

## ğŸ§ª Result
- âœ… Validation returns error when required fields are missing
- âœ… Confirmed working in form UI
- âœ… Logs validated fix

## ğŸ“ Files Affected
- src/utils/validator/data.js
- src/utils/validator/index.js

## ğŸ”§ Stack
Microfrontend, React, Schema Validator

## ğŸ§  Reflection
Commented schema properties can silently break validation. Propose adding required field tests per tab+document.
